import{_ as X}from"./BuXGNSq-.js";import{m as W,o as R,y as Y,w as F,a as c,t as V,z as Z,s as ee,r as P,v as w,A as ae,B as te,I,C as ne,D as le,E as se,G as re,H as ie,J as oe,K as ue,L as ce,M as ve,N as T,O as de,P as _,Q as fe,b as v,R as $,S as B,T as z,U as E,u as ge,x as me,n as he,g as pe,V as ye,c as N,p as O,F as K,q as be,W as xe,d as D}from"./BvWBKVWv.js";import{u as ke,r as U}from"./mOnkB3Qw.js";import{m as _e,a as Le,b as we,c as Pe,d as Ve,V as L}from"./CFJxcYAg.js";import{m as Ce,a as Se}from"./XJmMKOH-.js";const Ae={class:"h-[100%] overflow-hidden relative flex md:flex-row flex-col gap-[15px] align-center rounded-[20px] bg-opacity-80 backdrop-blur-[4px] bg-neutral-500"},$e={class:"flex sm:flex-row sm:w-[100%] gap-[15px] sm:px-[0px] sm:py-[0px] flex-col w-fit bg-grey-lighten-1 px-[15px] py-2 rounded-[12px]"},Re=["src","alt"],Ie={class:"grow flex flex-col gap-[10px]"},Be={class:"underline decoration-blue-600 decoration-2"},Ne={class:"flex items-center gap-[3px]"},Fe={class:"outline-4 outline-green-400"},De={class:"relative left-0"},Me={class:""},qe={class:"rotate-90 m-auto"},Te=W({__name:"characterCard",props:{character:Object},setup(e){const m=s=>{switch(s){case"Alive":return"bg-green-600";case"Dead":return"bg-red-600";case"unknown":return"bg-blue-600"}};return(s,f)=>{const t=X;return R(),Y(t,{to:`/character/${e.character.id}`},{default:F(()=>{var r;return[c("div",Ae,[c("div",$e,[c("img",{class:"max-w-[200px] overflow-hidden rounded-[20px]",src:e.character.image,alt:e.character.name},null,8,Re),c("div",Ie,[c("div",null,[c("p",Be,V(e.character.name),1),c("div",Ne,[c("p",null,V(e.character.species)+" - ",1),c("p",Fe,V(e.character.gender),1)])]),c("div",De,[f[0]||(f[0]=c("p",{class:"text-gray-600"},"Leaving on:",-1)),c("p",Me,V((r=e.character)==null?void 0:r.location.name),1)]),c("div",null,[f[1]||(f[1]=c("p",{class:"text-gray-600"},"Originally from:",-1)),c("p",null,V(e.character.origin.name),1)])])]),c("div",{class:Z([m(e.character.status),"flex justify-center text-center -rotate-45 -top-[35%] overflow-hidden right-[2.5%] min-h-[100%] max-w-[30px] absolute"])},[c("p",qe,V(e.character.status),1)],2)])]}),_:1},8,["to"])}}}),ze=ee("characters",()=>{const e=P({}),m=w(()=>{const i=[];for(const g in e.value)i.push(...e.value[g]);return i}),s=P(0),f=P(!1),t=P(null),r=async i=>{if(f.value=!0,t.value=null,e.value[i.toString()]){console.log("this1 is already here");return}try{const g=await $fetch(`https://rickandmortyapi.com/api/character/?page=${i}`);e.value[i.toString()]=g.results,console.log("it was pinia request for characters"),s.value=g.info.pages,setTimeout(()=>{b()},1e4)}catch(g){t.value="Помилка завантаження персонажів",console.error(g)}finally{f.value=!1}},b=async()=>{let i=1,g=[];for(;i<=s.value;){if(e.value[i.toString()]){i++;continue}g.push(`https://rickandmortyapi.com/api/character/?page=${i}`),i++}const C=g.map(async n=>await $fetch(n));(await Promise.all(C)).forEach(n=>{if(n.info.prev!==null){const d=+n.info.prev.match(/\?page=(\d+)/)[1]+1;e.value[d]=n.results}else e.value[1]=n.results})};return{pages:s,characters:e,fetchCharacterPage:r,fetchRestCharacters:b,charactersArray:m}});function Ee(){const e=P([]);ae(()=>e.value=[]);function m(s,f){e.value[f]=s}return{refs:e,updateRef:m}}const Oe=te({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:I,default:"$first"},prevIcon:{type:I,default:"$prev"},nextIcon:{type:I,default:"$next"},lastIcon:{type:I,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,..._e(),...ne(),...Ce(),...Le(),...we(),...Pe(),...Se({tag:"nav"}),...le(),...Ve({variant:"text"})},"VPagination"),Ke=se()({name:"VPagination",props:Oe(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,m){let{slots:s,emit:f}=m;const t=re(e,"modelValue"),{t:r,n:b}=ie(),{isRtl:i}=oe(),{themeClasses:g}=ue(e),{width:C}=ce(),p=ve(-1);T(void 0,{scoped:!0});const{resizeRef:n}=de(a=>{if(!a.length)return;const{target:l,contentRect:u}=a[0],h=l.querySelector(".v-pagination__list > *");if(!h)return;const y=u.width,A=h.offsetWidth+parseFloat(getComputedStyle(h).marginRight)*2;p.value=M(y,A)}),d=w(()=>parseInt(e.length,10)),o=w(()=>parseInt(e.start,10)),x=w(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):p.value>=0?p.value:M(C.value,58));function M(a,l){const u=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-l*u)/l).toFixed(2)))}const j=w(()=>{if(d.value<=0||isNaN(d.value)||d.value>Number.MAX_SAFE_INTEGER)return[];if(x.value<=0)return[];if(x.value===1)return[t.value];if(d.value<=x.value)return B(d.value,o.value);const a=x.value%2===0,l=a?x.value/2:Math.floor(x.value/2),u=a?l:l+1,h=d.value-l;if(u-t.value>=0)return[...B(Math.max(1,x.value-1),o.value),e.ellipsis,d.value];if(t.value-h>=(a?1:0)){const y=x.value-1,A=d.value-y+o.value;return[o.value,e.ellipsis,...B(y,A)]}else{const y=Math.max(1,x.value-3),A=y===1?t.value:t.value-Math.ceil(y/2)+o.value;return[o.value,e.ellipsis,...B(y,A),e.ellipsis,d.value]}});function S(a,l,u){a.preventDefault(),t.value=l,u&&f(u,l)}const{refs:G,updateRef:H}=Ee();T({VPaginationBtn:{color:_(e,"color"),border:_(e,"border"),density:_(e,"density"),size:_(e,"size"),variant:_(e,"variant"),rounded:_(e,"rounded"),elevation:_(e,"elevation")}});const J=w(()=>j.value.map((a,l)=>{const u=h=>H(h,l);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${l}`,page:a,props:{ref:u,ellipsis:!0,icon:!0,disabled:!0}};{const h=a===t.value;return{isActive:h,key:a,page:b(a),props:{ref:u,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:h?e.activeColor:e.color,"aria-current":h,"aria-label":r(h?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:y=>S(y,a)}}}})),k=w(()=>{const a=!!e.disabled||t.value<=o.value,l=!!e.disabled||t.value>=o.value+d.value-1;return{first:e.showFirstLastPage?{icon:i.value?e.lastIcon:e.firstIcon,onClick:u=>S(u,o.value,"first"),disabled:a,"aria-label":r(e.firstAriaLabel),"aria-disabled":a}:void 0,prev:{icon:i.value?e.nextIcon:e.prevIcon,onClick:u=>S(u,t.value-1,"prev"),disabled:a,"aria-label":r(e.previousAriaLabel),"aria-disabled":a},next:{icon:i.value?e.prevIcon:e.nextIcon,onClick:u=>S(u,t.value+1,"next"),disabled:l,"aria-label":r(e.nextAriaLabel),"aria-disabled":l},last:e.showFirstLastPage?{icon:i.value?e.firstIcon:e.lastIcon,onClick:u=>S(u,o.value+d.value-1,"last"),disabled:l,"aria-label":r(e.lastAriaLabel),"aria-disabled":l}:void 0}});function q(){var l;const a=t.value-o.value;(l=G.value[a])==null||l.$el.focus()}function Q(a){a.key===z.left&&!e.disabled&&t.value>+e.start?(t.value=t.value-1,E(q)):a.key===z.right&&!e.disabled&&t.value<o.value+d.value-1&&(t.value=t.value+1,E(q))}return fe(()=>v(e.tag,{ref:n,class:["v-pagination",g.value,e.class],style:e.style,role:"navigation","aria-label":r(e.ariaLabel),onKeydown:Q,"data-test":"v-pagination-root"},{default:()=>[v("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&v("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[s.first?s.first(k.value.first):v(L,$({_as:"VPaginationBtn"},k.value.first),null)]),v("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[s.prev?s.prev(k.value.prev):v(L,$({_as:"VPaginationBtn"},k.value.prev),null)]),J.value.map((a,l)=>v("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[s.item?s.item(a):v(L,$({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),v("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[s.next?s.next(k.value.next):v(L,$({_as:"VPaginationBtn"},k.value.next),null)]),e.showFirstLastPage&&v("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[s.last?s.last(k.value.last):v(L,$({_as:"VPaginationBtn"},k.value.last),null)])])]})),{}}}),Ue={class:"grid md:grid-cols-2 grid-cols-1 gap-[15px]"},Qe=W({__name:"index",async setup(e){let m,s;const f=ge(),t=me(),r=P(Number(f.query.page)||1),b=ze(),{data:i}=([m,s]=he(async()=>ke("characters",async()=>(await b.fetchCharacterPage(r.value),b.characters[r.value]))),m=await m,s(),m);function g(p){r.value=p,t.push({query:{...f.query,page:p}}),U("characters")}const C=P(0);return pe(r,p=>{r.value=p,t.push({query:{...f.query,page:p}}),U("characters")}),_(b.characters),ye(()=>{b.fetchRestCharacters()}),(p,n)=>{const d=Te;return R(),N("div",null,[O(i)?(R(),N(K,{key:0},[c("ul",Ue,[(R(!0),N(K,null,be(O(i),o=>(R(),N("li",{key:o.id},[v(d,{character:o},null,8,["character"])]))),128))]),v(Ke,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=o=>r.value=o),class:"w-fit mx-auto rounded-[12px] bg-grey-darken-4 mt-[10px]","total-visible":"6",length:"42"},null,8,["modelValue"])],64)):xe("",!0),v(L,{onClick:n[1]||(n[1]=o=>g(r.value+1))},{default:F(()=>n[4]||(n[4]=[D("nextPage")])),_:1}),v(L,{onClick:n[2]||(n[2]=o=>console.log(C.value))},{default:F(()=>n[5]||(n[5]=[D("paget")])),_:1}),v(L,{onClick:n[3]||(n[3]=o=>g(r.value-1))},{default:F(()=>n[6]||(n[6]=[D("prewPage")])),_:1})])}}});export{Qe as default};
