import{_ as X}from"./C9S9AEj4.js";import{m as W,o as R,y as Y,w as F,a as u,t as C,z as Z,s as ee,r as P,v as w,A as ae,B as te,I,C as ne,D as le,E as se,G as re,H as ie,J as oe,K as ue,L as ce,M as ve,N as T,O as de,P as _,Q as fe,b as v,R as A,S as B,T as z,U as E,u as ge,x as me,n as he,g as pe,V as ye,c as N,p as O,F as K,q as be,W as xe,d as D}from"./CARso9Cv.js";import{u as ke,r as U}from"./A8evAv3m.js";import{m as _e,a as Le,b as we,c as Pe,d as Ce,V as L}from"./EZhaNdTJ.js";import{m as Ve,a as Se}from"./YkaZgxEu.js";const $e={class:"h-[100%] overflow-hidden relative flex md:flex-row flex-col gap-[15px] align-center rounded-[20px] bg-opacity-80 backdrop-blur-[4px] bg-neutral-500"},Ae={class:"flex sm:flex-row sm:w-[100%] gap-[15px] sm:px-[0px] sm:py-[0px] flex-col w-fit bg-grey-lighten-1 px-[15px] py-2 rounded-[12px]"},Re=["src","alt"],Ie={class:"grow flex flex-col gap-[10px]"},Be={class:"underline decoration-blue-600 decoration-2"},Ne={class:"flex items-center gap-[3px]"},Fe={class:"outline-4 outline-green-400"},De={class:"relative left-0"},Me={class:""},qe={class:"rotate-90 m-auto"},Te=W({__name:"characterCard",props:{character:Object},setup(e){const m=r=>{switch(r){case"Alive":return"bg-green-600";case"Dead":return"bg-red-600";case"unknown":return"bg-blue-600"}};return(r,g)=>{const n=X;return R(),Y(n,{to:`/character/${e.character.id}`},{default:F(()=>{var l;return[u("div",$e,[u("div",Ae,[u("img",{class:"max-w-[200px] overflow-hidden rounded-[20px]",src:e.character.image,alt:e.character.name},null,8,Re),u("div",Ie,[u("div",null,[u("p",Be,C(e.character.name),1),u("div",Ne,[u("p",null,C(e.character.species)+" - ",1),u("p",Fe,C(e.character.gender),1)])]),u("div",De,[g[0]||(g[0]=u("p",{class:"text-gray-600"},"Leaving on:",-1)),u("p",Me,C((l=e.character)==null?void 0:l.location.name),1)]),u("div",null,[g[1]||(g[1]=u("p",{class:"text-gray-600"},"Originally from:",-1)),u("p",null,C(e.character.origin.name),1)])])]),u("div",{class:Z([m(e.character.status),"flex justify-center text-center -rotate-45 -top-[35%] overflow-hidden right-[2.5%] min-h-[100%] max-w-[30px] absolute"])},[u("p",qe,C(e.character.status),1)],2)])]}),_:1},8,["to"])}}}),ze=ee("characters",()=>{const e=P({}),m=w(()=>{const o=[];for(const d in e.value)o.push(...e.value[d]);return o}),r=P(0),g=P(!1),n=P(null),l=async o=>{if(g.value=!0,n.value=null,e.value[o.toString()]){console.log("this1 is already here");return}try{const d=await $fetch(`https://rickandmortyapi.com/api/character/?page=${o}`);e.value[o.toString()]=d.results,console.log("it was pinia request for characters"),r.value=d.info.pages,setTimeout(()=>{b()},1e4)}catch(d){n.value="Помилка завантаження персонажів",console.error(d)}finally{g.value=!1}},b=async()=>{let o=1,d=[];for(;o<=r.value;){if(e.value[o.toString()]){o++;continue}d.push(`https://rickandmortyapi.com/api/character/?page=${o}`),o++}const V=d.map(async t=>await $fetch(t));(await Promise.all(V)).forEach(t=>{if(t.info.prev!==null){const f=+t.info.prev.match(/\?page=(\d+)/)[1]+1;e.value[f]=t.results}else e.value[1]=t.results})};return{pages:r,characters:e,fetchCharacterPage:l,fetchRestCharacters:b,charactersArray:m}});function Ee(){const e=P([]);ae(()=>e.value=[]);function m(r,g){e.value[g]=r}return{refs:e,updateRef:m}}const Oe=te({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:I,default:"$first"},prevIcon:{type:I,default:"$prev"},nextIcon:{type:I,default:"$next"},lastIcon:{type:I,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,..._e(),...ne(),...Ve(),...Le(),...we(),...Pe(),...Se({tag:"nav"}),...le(),...Ce({variant:"text"})},"VPagination"),Ke=se()({name:"VPagination",props:Oe(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,m){let{slots:r,emit:g}=m;const n=re(e,"modelValue"),{t:l,n:b}=ie(),{isRtl:o}=oe(),{themeClasses:d}=ue(e),{width:V}=ce(),p=ve(-1);T(void 0,{scoped:!0});const{resizeRef:t}=de(a=>{if(!a.length)return;const{target:s,contentRect:c}=a[0],h=s.querySelector(".v-pagination__list > *");if(!h)return;const y=c.width,$=h.offsetWidth+parseFloat(getComputedStyle(h).marginRight)*2;p.value=M(y,$)}),f=w(()=>parseInt(e.length,10)),i=w(()=>parseInt(e.start,10)),x=w(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):p.value>=0?p.value:M(V.value,58));function M(a,s){const c=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-s*c)/s).toFixed(2)))}const j=w(()=>{if(f.value<=0||isNaN(f.value)||f.value>Number.MAX_SAFE_INTEGER)return[];if(x.value<=0)return[];if(x.value===1)return[n.value];if(f.value<=x.value)return B(f.value,i.value);const a=x.value%2===0,s=a?x.value/2:Math.floor(x.value/2),c=a?s:s+1,h=f.value-s;if(c-n.value>=0)return[...B(Math.max(1,x.value-1),i.value),e.ellipsis,f.value];if(n.value-h>=(a?1:0)){const y=x.value-1,$=f.value-y+i.value;return[i.value,e.ellipsis,...B(y,$)]}else{const y=Math.max(1,x.value-3),$=y===1?n.value:n.value-Math.ceil(y/2)+i.value;return[i.value,e.ellipsis,...B(y,$),e.ellipsis,f.value]}});function S(a,s,c){a.preventDefault(),n.value=s,c&&g(c,s)}const{refs:G,updateRef:H}=Ee();T({VPaginationBtn:{color:_(e,"color"),border:_(e,"border"),density:_(e,"density"),size:_(e,"size"),variant:_(e,"variant"),rounded:_(e,"rounded"),elevation:_(e,"elevation")}});const J=w(()=>j.value.map((a,s)=>{const c=h=>H(h,s);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${s}`,page:a,props:{ref:c,ellipsis:!0,icon:!0,disabled:!0}};{const h=a===n.value;return{isActive:h,key:a,page:b(a),props:{ref:c,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:h?e.activeColor:e.color,"aria-current":h,"aria-label":l(h?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:y=>S(y,a)}}}})),k=w(()=>{const a=!!e.disabled||n.value<=i.value,s=!!e.disabled||n.value>=i.value+f.value-1;return{first:e.showFirstLastPage?{icon:o.value?e.lastIcon:e.firstIcon,onClick:c=>S(c,i.value,"first"),disabled:a,"aria-label":l(e.firstAriaLabel),"aria-disabled":a}:void 0,prev:{icon:o.value?e.nextIcon:e.prevIcon,onClick:c=>S(c,n.value-1,"prev"),disabled:a,"aria-label":l(e.previousAriaLabel),"aria-disabled":a},next:{icon:o.value?e.prevIcon:e.nextIcon,onClick:c=>S(c,n.value+1,"next"),disabled:s,"aria-label":l(e.nextAriaLabel),"aria-disabled":s},last:e.showFirstLastPage?{icon:o.value?e.firstIcon:e.lastIcon,onClick:c=>S(c,i.value+f.value-1,"last"),disabled:s,"aria-label":l(e.lastAriaLabel),"aria-disabled":s}:void 0}});function q(){var s;const a=n.value-i.value;(s=G.value[a])==null||s.$el.focus()}function Q(a){a.key===z.left&&!e.disabled&&n.value>+e.start?(n.value=n.value-1,E(q)):a.key===z.right&&!e.disabled&&n.value<i.value+f.value-1&&(n.value=n.value+1,E(q))}return fe(()=>v(e.tag,{ref:t,class:["v-pagination",d.value,e.class],style:e.style,role:"navigation","aria-label":l(e.ariaLabel),onKeydown:Q,"data-test":"v-pagination-root"},{default:()=>[v("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&v("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(k.value.first):v(L,A({_as:"VPaginationBtn"},k.value.first),null)]),v("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(k.value.prev):v(L,A({_as:"VPaginationBtn"},k.value.prev),null)]),J.value.map((a,s)=>v("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[r.item?r.item(a):v(L,A({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),v("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(k.value.next):v(L,A({_as:"VPaginationBtn"},k.value.next),null)]),e.showFirstLastPage&&v("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(k.value.last):v(L,A({_as:"VPaginationBtn"},k.value.last),null)])])]})),{}}}),Ue={class:"grid md:grid-cols-2 grid-cols-1 gap-[15px]"},Qe=W({__name:"index",async setup(e){let m,r;const g=ge(),n=me(),l=P(Number(g.query.page)||1),b=ze(),{data:o}=([m,r]=he(async()=>ke("characters",async()=>(await b.fetchCharacterPage(l.value),b.characters[l.value]))),m=await m,r(),m);function d(p){l.value=p,n.push({query:{...g.query,page:p}}),U("characters")}const V=P(0);return pe(l,p=>{l.value=p,n.push({query:{...g.query,page:p}}),U("characters")}),_(b.characters),ye(()=>{b.fetchRestCharacters()}),(p,t)=>{const f=Te;return R(),N("div",null,[O(o)?(R(),N(K,{key:0},[u("ul",Ue,[(R(!0),N(K,null,be(O(o),i=>(R(),N("li",{key:i.id},[v(f,{character:i},null,8,["character"])]))),128))]),v(Ke,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=i=>l.value=i),class:"w-fit mx-auto rounded-[12px] bg-grey-darken-4 mt-[10px]","total-visible":"6",length:"42"},null,8,["modelValue"]),u("button",{onClick:t[1]||(t[1]=i=>d(l.value-1))},"prev"),u("button",{onClick:t[2]||(t[2]=i=>d(l.value+1))},"next")],64)):xe("",!0),v(L,{onClick:t[3]||(t[3]=i=>d(l.value+1))},{default:F(()=>t[6]||(t[6]=[D("nextPage")])),_:1}),v(L,{onClick:t[4]||(t[4]=i=>console.log(V.value))},{default:F(()=>t[7]||(t[7]=[D("paget")])),_:1}),v(L,{onClick:t[5]||(t[5]=i=>d(l.value-1))},{default:F(()=>t[8]||(t[8]=[D("prewPage")])),_:1})])}}});export{Qe as default};
