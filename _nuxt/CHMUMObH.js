import{s as v,r as c,v as m,m as g,u as E,x as y,o as h,c as k,a as l,p}from"./CARso9Cv.js";import{u as $}from"./A8evAv3m.js";const w=v("episodes",()=>{const t=c({}),n=m(()=>{const e=[];for(const o in t.value)e.push(...t.value[o]);return e}),s=c(0),i=async e=>{const o=await $fetch(`https://rickandmortyapi.com/api/episode?page=${e}`);console.log(o.info.pages),s.value=o.info.pages,console.log(s.value),t.value[e]=o.results,await r()},r=async()=>{let e=1,o=[];for(;e<=s.value;){if(t.value[e.toString()]){e++;continue}o.push(`https://rickandmortyapi.com/api/episode/?page=${e}`),e++}const u=o.map(async a=>await $fetch(a)),d=await Promise.all(u);console.log(s.value),d.forEach(a=>{if(a.info.prev!==null){const f=+a.info.prev.match(/\?page=(\d+)/)[1]+1;t.value[f]=a.results}else t.value[1]=a.results}),console.log("done")};return{episodes:t,availableEpisodesPage:s,episodesList:n,fetchEpisodes:i,fetchRestEpisodes:r}}),C=g({__name:"index",setup(t){const n=E();y();const s=w(),i=c(Number(n.query.page)||1);return $("getEpisodes",async()=>(await s.fetchEpisodes(i.value),s.episodes)),(r,e)=>(h(),k("div",null,[l("p",{onClick:e[0]||(e[0]=o=>console.log(p(s).episodesList))},"asdlist"),l("p",{onClick:e[1]||(e[1]=o=>console.log(p(s).availableEpisodesPage))},"asdepisodes"),l("p",{onClick:e[2]||(e[2]=o=>p(s).fetchRestEpisodes())},"aasdasdsd")]))}});export{C as default};
